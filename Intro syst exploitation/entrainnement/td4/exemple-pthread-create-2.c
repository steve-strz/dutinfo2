#include <pthread.h>
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <assert.h>

void *function_thread (void *arg);

int main(int argc, char *argv[]) {
    assert (argc == 2);
    long nb_threads = atol(argv[1]);
    pthread_t thr[nb_threads];
    for(long l = 0; l < nb_threads; l++){
        if(pthread_create (&thr[l], NULL, function_thread, (void*) l) != 0){
            fprintf(stderr, "Erreur dans pthread_create\n");
            exit(EXIT_FAILURE);
        }
    }
    while(1){
        fprintf(stdout, "Thread number : %ld\n", 0l);
        sleep(1);
    }
}

void *function_thread(void *arg){
    long num = (long) arg;
    while(1){
        fprintf(stdout, "Thread number : %ld\n", num+0l);
        sleep(1);
    }
}