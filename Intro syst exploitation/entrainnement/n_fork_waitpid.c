#include <stdio.h>
#include <stdlib.h>
#include <sys/types.h>
#include <unistd.h>
#include <sys/errno.h>

int main(int argc, char *argv[]){
  pid_t pid;
  int fils;
  int NB_FILS = atoi(argv[1]);

  for(fils = 0; fils < NB_FILS; fils++){
    if((pid = fork()) < 0){
      perror("fork");
      exit(EXIT_FAILURE);
    }
    if(pid != 0) continue;
    printf("Je suis le fild %d (%d) du pÃ¨re %d\n", fils, getpid(), getppid());
    exit(EXIT_SUCCESS);
  }
  while(wait(NULL) > 0){
    printf("...\n");
  }
  exit(EXIT_SUCCESS);
}