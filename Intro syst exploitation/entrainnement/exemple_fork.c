#include <stdio.h>
#include <stdlib.h>
#include <sys/types.h>
#include <unistd.h>
#include <sys/errno.h>

int main(int argc, char *argv[]){
  pid_t pid_fils = fork();

  if(pid_fils == -1){
    fprintf(stderr, "fork() impossible, errno=%d\n", errno);
    return EXIT_FAILURE;
  }
  if(pid_fils == 0){
    //processus fils
    fprintf(stdout, "Fils : PID=%ld, PPID=%ld\n", (long) getpid(), (long) getppid());
    printf("proc fils argv : %s\n", argv[1]);
    sleep(5);
    return EXIT_SUCCESS;
  }else{
    //processus parent
    fprintf(stdout, "Parent : PID=%ld, PPID=%ld\n, PID fils=%ld\n", (long) getpid(), (long) getppid(), (long)pid_fils);
    printf("proc parent argv : %s\n", argv[2]);
    wait(NULL);
    return EXIT_SUCCESS;
  }
}